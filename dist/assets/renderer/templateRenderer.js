import{s as y,r as v}from"../static/server.browser-8b87c89d.js";const _="modulepreload",p=function(e){return"/"+e},h={},x=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=p(i),i in h)return;h[i]=!0;const a=i.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let f=o.length-1;f>=0;f--){const m=o[f];if(m.href===i&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${c}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":_,a||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),a)return new Promise((f,m)=>{l.addEventListener("load",f),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},P=e=>{const t=e.split("/");return t.pop(),t.map(()=>"../").reduce((n,r)=>n+r,"")};var d={exports:{}},s=String,$=function(){return{isColorSupported:!1,reset:s,bold:s,dim:s,italic:s,underline:s,inverse:s,hidden:s,strikethrough:s,black:s,red:s,green:s,yellow:s,blue:s,magenta:s,cyan:s,white:s,gray:s,bgBlack:s,bgRed:s,bgGreen:s,bgYellow:s,bgBlue:s,bgMagenta:s,bgCyan:s,bgWhite:s}};d.exports=$();d.exports.createColors=$;const E=e=>`<title>${e.title?e.title:"Yext Pages Site"}</title>
    <meta charset="${e.charset||"UTF-8"}">
    <meta name="viewport" content="${e.viewport||"width=device-width, initial-scale=1"}">
    ${e.tags?e.tags.map(R).join(`
`):""}
    ${e.other?e.other:""}`.split(`
`).filter(t=>t.trim()!="").join(`
`),R=e=>{switch(e.type){case"base":case"link":case"meta":return`<${e.type} ${g(e.attributes)}>`;case"style":case"script":case"noscript":case"template":return`<${e.type} ${g(e.attributes)}></${e.type}>`;default:return console.log(d.exports.yellow(`[WARNING]: Tag type ${e.type} is unsupported by the Tag interface. Please use "other" to render this tag.`)),""}},g=e=>Object.keys(e).map(t=>`${t}="${e[t]}"`).join(" "),S=(e,t)=>{var n,r;return e!=null&&e.lang?e.lang:(n=t==null?void 0:t.document)!=null&&n.locale?(r=t==null?void 0:t.document)==null?void 0:r.locale:"en"},O=(e,t,n,r,o)=>{if(!e.__meta.manifest)throw new Error("Manifest is undefined");const i=e.__meta.manifest.projectFilepaths,a=o?o(e):void 0,c=S(a,e),u=e.__meta.manifest.bundlerManifest,l=`${i.templatesRoot}/${t.templateName}.tsx`,f=`${i.scopedTemplatesPath}/${t.templateName}.tsx`,m=!!i.scopedTemplatesPath&&u[f]?f:l;return`<!DOCTYPE html>
    <html lang=${c}>
    <head>
        <script>window.__INITIAL__DATA__ = ${JSON.stringify(e)}<\/script>
        ${Array.from(T(m,e.__meta.manifest.bundlerManifest,new Set)).map(b=>`<link rel="stylesheet" href="${e.relativePrefixToRoot+b}"/>`).join(`
`)}
        ${a?E(a):""}
    </head>
    <body>
        <div id="reactele">${n}</div>${r?`<script type="module" src="${e.relativePrefixToRoot+k(`${i.hydrationBundleOutputRoot}/${t.templateName}.tsx`,e)}" defer><\/script>`:""}
    </body>
    </html>`},T=(e,t,n)=>{const r=structuredClone(Object.entries(t).find(([c])=>c===e));if(!r)return new Set;const[o,i]=r;n.add(o);const a=new Set(i.css);return(i.imports||[]).flatMap(c=>Array.from(T(c,t,n))).forEach(c=>a.add(c)),a},k=(e,t)=>{const{__meta:n}=t;for(const[r,o]of Object.entries(n.manifest.bundlerManifest))if(r===e)return o.file},N=e=>{if(j(e.filename,e.config),!e.getPath)throw new Error(`Template ${e.filename} is missing an exported getPath function.`);if(!e.default&&!e.render)throw new Error(`Module ${e.filename} does not have the necessary exports to produce page. A module should either have a React component as a default export or a render function.`)},j=(e,t)=>{if(!t.name)throw new Error(`Template ${e} is missing a "name" in the config function.`);if(t.streamId&&t.stream)throw new Error(`Template ${e} must not define both a "streamId" and a "stream".`)},A=(e,t)=>{let n=e.split("/")[e.split("/").length-1];const r=n.slice(n.lastIndexOf("."));let o=n.slice(0,n.lastIndexOf("."));return t&&(n=n.split(r)[0].slice(0,n.split(r)[0].lastIndexOf("."))+r,o=o.slice(0,o.lastIndexOf("."))),{base:n,name:o}},F=(e,t,n)=>{const r=A(e,n),o={...t,config:B(r.name,t.config),path:e,filename:r.base,templateName:r.name};return N(o),o},B=(e,t)=>{var n;return{name:(n=t==null?void 0:t.name)!=null?n:e,...t}},w=new Map,L=async(e,t)=>{const n=t.bundlePaths[e].replace("assets","..");if(!n)throw new Error(`Could not find path for feature ${e}`);let r=w.get(n);r||(r=await x(()=>import(n),[]));const o=F(n,r,!0);return w.set(n,o),o},H=async(e,t)=>{var i,a;e.transformProps&&(t=await e.transformProps(t));const n=e.getPath(t);if(!n)throw new Error(`getPath does not return a valid string in template '${e.templateName}'`);const r={...t,path:n,relativePrefixToRoot:P(n)};return{content:W(e,r),path:n,redirects:(a=(i=e.getRedirects)==null?void 0:i.call(e,r))!=null?a:[]}},W=(e,t)=>{const{default:n,render:r,getHeadConfig:o}=e;if(!n&&!r)throw new Error(`Cannot render html from template '${e.config.name}'. Template is missing render function or default export.`);return r?(o&&console.warn(`getHeadConfig for template ${e.config.name} will not be called since a custom render function is defined.`),r(t)):O(t,e,y.exports.renderToString(v.exports.createElement(n,t)),!0,o)};var U=async e=>{const t=e.__meta.manifest,n=await L(e.document.__.name,t);return await H(n,e)};export{U as default};
